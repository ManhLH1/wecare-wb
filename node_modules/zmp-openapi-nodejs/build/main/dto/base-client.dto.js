"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
};
var __rest = (this && this.__rest) || function (s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.BaseClient = void 0;
const axios_1 = __importStar(require("axios"));
const form_data_1 = __importDefault(require("form-data"));
const qs_1 = __importDefault(require("qs"));
const constant_1 = require("../config/constant");
class BaseClient {
    constructor(version, apiKeyHeaderName, apiKey, identityHeaderName, identity, proxy) {
        this.isUseProxy = false;
        this.domain = constant_1.Constant.DOMAIN_PROD;
        this.sdkVersion = '2.1.0';
        this.sdkName = 'Node.js';
        this.validateInit = () => {
            if (!this.apiKey ||
                !this.identity ||
                !this.apiKeyHeaderName ||
                !this.identityHeaderName) {
                throw new Error('Invalid init value');
            }
            if (this.isUseProxy && (!this.proxy.host || !this.proxy.port)) {
                throw new Error('Invalid proxy value');
            }
        };
        this.getVersionsMiniApp = (appSlice) => {
            return this.doGet(`${this.buildRequestURI(appSlice.miniAppId, constant_1.Constant.VERSIONS)}`, Object.assign({}, appSlice), {
                mapAxiosError(error) {
                    if (error.response.status === 400) {
                        return 'Invalid Mini App ID';
                    }
                    return error.message;
                },
            });
        };
        this.createMiniApp = (appInfo) => {
            return this.doPost(`${this.buildRequestURI()}`, Object.assign({}, appInfo));
        };
        this.deployMiniApp = (deployApp) => {
            const formData = new form_data_1.default();
            formData.append('file', deployApp.file, {
                contentType: 'application/zip',
            });
            return this.doPost(`${this.buildRequestURI(deployApp.miniAppId, constant_1.Constant.UPLOAD)}?${qs_1.default.stringify({
                name: deployApp.name,
                description: deployApp.description,
            })}`, formData);
        };
        this.requestPublishMiniApp = (requestPublishApp) => {
            return this.doPost(`${this.buildRequestURI(requestPublishApp.miniAppId, constant_1.Constant.REQUEST_PUBLISH)}`, Object.assign({}, requestPublishApp));
        };
        this.publishMiniApp = (publishApp) => {
            return this.doPost(`${this.buildRequestURI(publishApp.miniAppId, constant_1.Constant.PUBLISH)}`, Object.assign({}, publishApp));
        };
        this.getStats = async (statsRequest) => {
            const response = await this.doGet(`${this.buildRequestURI(statsRequest.miniAppId, constant_1.Constant.STATS)}`, Object.assign({}, statsRequest));
            const { error, message } = response, data = __rest(response, ["error", "message"]);
            return {
                error,
                message,
                data,
            };
        };
        this.listPaymentChannels = async (request) => {
            return this.doGet(`${this.buildRequestURI(request.miniAppId, constant_1.Constant.PAYMENT_CHANNELS)}`, {});
        };
        this.convertObjectToFormData = (obj) => {
            const formData = new form_data_1.default();
            for (const key in obj) {
                if (obj.hasOwnProperty(key)) {
                    const value = obj[key];
                    if (Array.isArray(value)) {
                        for (let i = 0; i < value.length; i++) {
                            formData.append(`${key}[${i}]`, value[i]);
                        }
                    }
                    else if (typeof obj[key] === 'boolean') {
                        formData.append(key, obj[key] ? 'true' : 'false');
                    }
                    else {
                        formData.append(key, obj[key]);
                    }
                }
            }
            return formData;
        };
        this.createPaymentChannel = async (request) => {
            return this.doPost(`${this.buildRequestURI(request.miniAppId, constant_1.Constant.PAYMENT_CHANNELS)}`, this.convertObjectToFormData(request));
        };
        this.updatePaymentChannel = async (request) => {
            return this.doPut(`${this.buildRequestURI(request.miniAppId, constant_1.Constant.PAYMENT_CHANNELS, request.channelId)}`, this.convertObjectToFormData(request));
        };
        this.buildRequestURI = (appId, path, ...pathVariables) => {
            let rs = `${this.version}${constant_1.Constant.APPS}`;
            if (!!appId) {
                rs += `/${appId}`;
            }
            if (!!path) {
                rs += path;
            }
            for (const pathVariable of pathVariables) {
                rs += `/${pathVariable}`;
            }
            return rs;
        };
        this.version = version;
        this.apiKeyHeaderName = apiKeyHeaderName;
        this.apiKey = apiKey;
        this.identityHeaderName = identityHeaderName;
        this.identity = identity;
        if (proxy) {
            this.proxy = proxy;
            this.isUseProxy = true;
        }
        this.headers = {
            [apiKeyHeaderName]: `Bearer ${this.apiKey}`,
            [identityHeaderName]: this.identity,
            'X-Sdk-Version': this.sdkVersion,
            'X-Sdk-Name': this.sdkName,
        };
    }
    setProxy(proxy) {
        this.proxy = proxy;
        this.isUseProxy = true;
    }
    cancelProxy() {
        this.proxy = null;
        this.isUseProxy = false;
    }
    async doGet(endpoint, params, options = {}) {
        var _a;
        try {
            this.validateInit();
            const response = await axios_1.default.get(`${this.domain}${endpoint}`, {
                params,
                headers: this.headers,
                proxy: this.isUseProxy && Object.assign({}, this.proxy),
            });
            return Object.assign({ error: response.data.err, message: response.data.msg }, response.data.data);
        }
        catch (error) {
            if (error instanceof axios_1.AxiosError) {
                return Object.assign({ error: (_a = (error.response ? error.response.status : error.status)) !== null && _a !== void 0 ? _a : -1, message: options.mapAxiosError
                        ? options.mapAxiosError(error)
                        : error.response
                            ? error.response.data.msg
                            : error.message }, {});
            }
            return Object.assign({ error: -1, message: error instanceof Error ? error.message : error }, {});
        }
    }
    async doPost(endpoint, params, options = {}) {
        var _a;
        try {
            this.validateInit();
            const response = await axios_1.default.post(`${this.domain}${endpoint}`, params, {
                headers: this.headers,
                proxy: this.isUseProxy && Object.assign({}, this.proxy),
            });
            return Object.assign({ error: response.data.err, message: response.data.msg }, response.data.data);
        }
        catch (error) {
            if (error instanceof axios_1.AxiosError) {
                return Object.assign({ error: (_a = (error.response ? error.response.status : error.status)) !== null && _a !== void 0 ? _a : -1, message: options.mapAxiosError
                        ? options.mapAxiosError(error)
                        : error.response
                            ? error.response.data.msg
                            : error.message }, {});
            }
            return Object.assign({ error: -1, message: error instanceof Error ? error.message : error }, {});
        }
    }
    async doPut(endpoint, params, options = {}) {
        var _a;
        try {
            this.validateInit();
            const response = await axios_1.default.put(`${this.domain}${endpoint}`, params, {
                headers: this.headers,
                proxy: this.isUseProxy && Object.assign({}, this.proxy),
            });
            return Object.assign({ error: response.data.err, message: response.data.msg }, response.data.data);
        }
        catch (error) {
            if (error instanceof axios_1.AxiosError) {
                return Object.assign({ error: (_a = (error.response ? error.response.status : error.status)) !== null && _a !== void 0 ? _a : -1, message: options.mapAxiosError
                        ? options.mapAxiosError(error)
                        : error.response
                            ? error.response.data.msg
                            : error.message }, {});
            }
            return Object.assign({ error: -1, message: error instanceof Error ? error.message : error }, {});
        }
    }
    async getMiniApps(appSlice) {
        return this.doGet(`${this.buildRequestURI()}`, Object.assign({}, appSlice));
    }
}
exports.BaseClient = BaseClient;
exports.default = { BaseClient };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1jbGllbnQuZHRvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2R0by9iYXNlLWNsaWVudC5kdG8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLCtDQUFrRTtBQUNsRSwwREFBaUM7QUFDakMsNENBQW9CO0FBQ3BCLGlEQUE4QztBQXVCOUMsTUFBYSxVQUFVO0lBYXJCLFlBQ0UsT0FBZSxFQUNmLGdCQUF3QixFQUN4QixNQUFjLEVBQ2Qsa0JBQTBCLEVBQzFCLFFBQWdCLEVBQ2hCLEtBQWE7UUFqQlAsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUU1QixXQUFNLEdBQVcsbUJBQVEsQ0FBQyxXQUFXLENBQUM7UUFDdEMsZUFBVSxHQUFXLE9BQU8sQ0FBQztRQUM3QixZQUFPLEdBQVcsU0FBUyxDQUFDO1FBZ0M1QixpQkFBWSxHQUFHLEdBQUcsRUFBRTtZQUMxQixJQUNFLENBQUMsSUFBSSxDQUFDLE1BQU07Z0JBQ1osQ0FBQyxJQUFJLENBQUMsUUFBUTtnQkFDZCxDQUFDLElBQUksQ0FBQyxnQkFBZ0I7Z0JBQ3RCLENBQUMsSUFBSSxDQUFDLGtCQUFrQixFQUN4QjtnQkFDQSxNQUFNLElBQUksS0FBSyxDQUFDLG9CQUFvQixDQUFDLENBQUM7YUFDdkM7WUFDRCxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtnQkFDN0QsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO2FBQ3hDO1FBQ0gsQ0FBQyxDQUFDO1FBMklLLHVCQUFrQixHQUFHLENBQUMsUUFBc0IsRUFBRSxFQUFFO1lBQ3JELE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FDZixHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxD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